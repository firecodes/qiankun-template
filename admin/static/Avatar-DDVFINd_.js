import{f as w,k as I,n as K,c as _,bb as N,a as E,bc as V,d as H,e as G,u as U,l as z,q as T,h as j,a7 as q,i as D,bd as X,o as Y,a6 as J,ao as Q,y as Z,s as ee,a9 as oe,j as x,be as te,aa as re}from"./index-B74JimqN.js";const ne={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}};Object.assign(Object.assign(Object.assign({},w.props),ne),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,strong:Boolean,triggerClickOnClose:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalCloseFocusable:{type:Boolean,default:!0},internalCloseIsButtonTag:{type:Boolean,default:!0},onCheckedChange:Function});const se=I("n-tag"),ae=K&&"loading"in document.createElement("img"),ie=(e={})=>{var a;const{root:l=null}=e;return{hash:`${e.rootMargin||"0px 0px 0px 0px"}-${Array.isArray(e.threshold)?e.threshold.join(","):(a=e.threshold)!==null&&a!==void 0?a:"0"}`,options:Object.assign(Object.assign({},e),{root:(typeof l=="string"?document.querySelector(l):l)||document.documentElement})}},L=new WeakMap,k=new WeakMap,P=new WeakMap,le=(e,a,l)=>{if(!e)return()=>{};const i=ie(a),{root:d}=i.options;let n;const c=L.get(d);c?n=c:(n=new Map,L.set(d,n));let h,r;n.has(i.hash)?(r=n.get(i.hash),r[1].has(e)||(h=r[0],r[1].add(e),h.observe(e))):(h=new IntersectionObserver(p=>{p.forEach(f=>{if(f.isIntersecting){const b=k.get(f.target),O=P.get(f.target);b&&b(),O&&(O.value=!0)}})},i.options),h.observe(e),r=[h,new Set([e])],n.set(i.hash,r));let u=!1;const g=()=>{u||(k.delete(e),P.delete(e),u=!0,r[1].has(e)&&(r[0].unobserve(e),r[1].delete(e)),r[1].size<=0&&n.delete(i.hash),n.size||L.delete(d))};return k.set(e,g),P.set(e,l),g},de=I("n-avatar-group"),ce=_("avatar",`
 width: var(--n-merged-size);
 height: var(--n-merged-size);
 color: #FFF;
 font-size: var(--n-font-size);
 display: inline-flex;
 position: relative;
 overflow: hidden;
 text-align: center;
 border: var(--n-border);
 border-radius: var(--n-border-radius);
 --n-merged-color: var(--n-color);
 background-color: var(--n-merged-color);
 transition:
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
`,[N(E("&","--n-merged-color: var(--n-color-modal);")),V(E("&","--n-merged-color: var(--n-color-popover);")),E("img",`
 width: 100%;
 height: 100%;
 `),H("text",`
 white-space: nowrap;
 display: inline-block;
 position: absolute;
 left: 50%;
 top: 50%;
 `),_("icon",`
 vertical-align: bottom;
 font-size: calc(var(--n-merged-size) - 6px);
 `),H("text","line-height: 1.25")]),ue=Object.assign(Object.assign({},w.props),{size:[String,Number],src:String,circle:{type:Boolean,default:void 0},objectFit:String,round:{type:Boolean,default:void 0},bordered:{type:Boolean,default:void 0},onError:Function,fallbackSrc:String,intersectionObserverOptions:Object,lazy:Boolean,onLoad:Function,renderPlaceholder:Function,renderFallback:Function,imgProps:Object,color:String}),ve=G({name:"Avatar",props:ue,setup(e){const{mergedClsPrefixRef:a,inlineThemeDisabled:l}=U(e),i=z(!1);let d=null;const n=z(null),c=z(null),h=()=>{const{value:o}=n;if(o&&(d===null||d!==o.innerHTML)){d=o.innerHTML;const{value:t}=c;if(t){const{offsetWidth:s,offsetHeight:m}=t,{offsetWidth:v,offsetHeight:F}=o,R=.9,B=Math.min(s/v*R,m/F*R,1);o.style.transform=`translateX(-50%) translateY(-50%) scale(${B})`}}},r=T(de,null),u=j(()=>{const{size:o}=e;if(o)return o;const{size:t}=r||{};return t||"medium"}),g=w("Avatar","-avatar",ce,te,e,a),p=T(se,null),f=j(()=>{if(r)return!0;const{round:o,circle:t}=e;return o!==void 0||t!==void 0?o||t:p?p.roundRef.value:!1}),b=j(()=>r?!0:e.bordered||!1),O=j(()=>{const o=u.value,t=f.value,s=b.value,{color:m}=e,{self:{borderRadius:v,fontSize:F,color:R,border:B,colorModal:$,colorPopover:A},common:{cubicBezierEaseInOut:W}}=g.value;let C;return typeof o=="number"?C=`${o}px`:C=g.value.self[q("height",o)],{"--n-font-size":F,"--n-border":s?B:"none","--n-border-radius":t?"50%":v,"--n-color":m||R,"--n-color-modal":m||$,"--n-color-popover":m||A,"--n-bezier":W,"--n-merged-size":`var(--n-avatar-size-override, ${C})`}}),y=l?D("avatar",j(()=>{const o=u.value,t=f.value,s=b.value,{color:m}=e;let v="";return o&&(typeof o=="number"?v+=`a${o}`:v+=o[0]),t&&(v+="b"),s&&(v+="c"),m&&(v+=X(m)),v}),O,e):void 0,S=z(!e.lazy);Y(()=>{if(e.lazy&&e.intersectionObserverOptions){let o;const t=J(()=>{o?.(),o=void 0,e.lazy&&(o=le(c.value,e.intersectionObserverOptions,S))});Q(()=>{t(),o?.()})}}),Z(()=>{var o;return e.src||((o=e.imgProps)===null||o===void 0?void 0:o.src)},()=>{i.value=!1});const M=z(!e.lazy);return{textRef:n,selfRef:c,mergedRoundRef:f,mergedClsPrefix:a,fitTextTransform:h,cssVars:l?void 0:O,themeClass:y?.themeClass,onRender:y?.onRender,hasLoadError:i,shouldStartLoading:S,loaded:M,mergedOnError:o=>{if(!S.value)return;i.value=!0;const{onError:t,imgProps:{onError:s}={}}=e;t?.(o),s?.(o)},mergedOnLoad:o=>{const{onLoad:t,imgProps:{onLoad:s}={}}=e;t?.(o),s?.(o),M.value=!0}}},render(){var e,a;const{$slots:l,src:i,mergedClsPrefix:d,lazy:n,onRender:c,loaded:h,hasLoadError:r,imgProps:u={}}=this;c?.();let g;const p=!h&&!r&&(this.renderPlaceholder?this.renderPlaceholder():(a=(e=this.$slots).placeholder)===null||a===void 0?void 0:a.call(e));return this.hasLoadError?g=this.renderFallback?this.renderFallback():ee(l.fallback,()=>[x("img",{src:this.fallbackSrc,style:{objectFit:this.objectFit}})]):g=oe(l.default,f=>{if(f)return x(re,{onResize:this.fitTextTransform},{default:()=>x("span",{ref:"textRef",class:`${d}-avatar__text`},f)});if(i||u.src){const b=this.src||u.src;return x("img",Object.assign(Object.assign({},u),{loading:ae&&!this.intersectionObserverOptions&&n?"lazy":"eager",src:n&&this.intersectionObserverOptions?this.shouldStartLoading?b:void 0:b,"data-image-src":b,onLoad:this.mergedOnLoad,onError:this.mergedOnError,style:[u.style||"",{objectFit:this.objectFit},p?{height:"0",width:"0",visibility:"hidden",position:"absolute"}:""]}))}}),x("span",{ref:"selfRef",class:[`${d}-avatar`,this.themeClass],style:this.cssVars},g,n&&p)}});export{ve as _};
